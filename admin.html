<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IMV EAD • Admin</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>

<body>
  <main class="container">
    <header class="topbar">
      <div class="topbar__left">
        <img class="topbar__logo" src="./assets/logo-imv.png" alt="IMV" />
        <div class="topbar__meta">
          <div class="topbar__title">Painel Admin • IMV</div>
          <div class="topbar__sub">
            <span id="adminName">...</span> • (<span id="adminRole">admin</span>)
          </div>
        </div>
      </div>

      <div class="row">
        <div class="tabs">
          <button class="tab active" data-tab="admin">Admin</button>
          <button class="tab" data-tab="library">Biblioteca</button>
          <button class="tab" data-tab="reports">Relatórios</button>
        </div>
        <button id="btnLogout" class="btn">Sair</button>
      </div>
    </header>

    <div id="authAlert" class="alert error" style="display:none;"></div>

    <section class="card">
      <div class="stats">
        <div class="stat">
          <div class="num" id="statUsers">0</div>
          <div class="lbl">Usuários</div>
        </div>
        <div class="stat">
          <div class="num" id="statCourses">0</div>
          <div class="lbl">Cursos</div>
        </div>
        <div class="stat">
          <div class="num" id="statClasses">0</div>
          <div class="lbl">Turmas</div>
        </div>
        <div class="stat">
          <div class="num" id="statEnroll">0</div>
          <div class="lbl">Matrículas</div>
        </div>
      </div>
      <p class="help">Se aparecer “Missing or insufficient permissions”, é porque a leitura ocorreu antes do perfil/role carregar (ou role/active no Firestore está errado). O JS abaixo só deve buscar dados após autenticar.</p>
    </section>

    <section class="card" id="tab-admin">
      <h2>Cadastrar Aluno</h2>
      <div class="grid grid-2">
        <label class="field">
          <span>Nome do aluno</span>
          <input id="studentName" placeholder="Nome completo" />
        </label>
        <label class="field">
          <span>Email do aluno (obrigatório)</span>
          <input id="studentEmail" type="email" placeholder="email@exemplo.com" />
        </label>
      </div>
      <div class="row">
        <button id="btnCreateStudent" class="btn btn-primary">Criar aluno</button>
        <span class="help" id="createStudentMsg"></span>
      </div>

      <hr style="border:0;border-top:1px solid rgba(255,255,255,0.10); margin:16px 0;">

      <h2>Cadastrar Professor</h2>
      <div class="grid grid-2">
        <label class="field">
          <span>Nome do professor</span>
          <input id="teacherName" placeholder="Nome completo" />
        </label>
        <label class="field">
          <span>Email do professor (obrigatório)</span>
          <input id="teacherEmail" type="email" placeholder="email@exemplo.com" />
        </label>
      </div>
      <div class="row">
        <button id="btnCreateTeacher" class="btn btn-primary">Criar professor</button>
        <span class="help" id="createTeacherMsg"></span>
      </div>
    </section>

    <section class="card" id="tab-library" style="display:none;">
      <h2>Biblioteca</h2>
      <p class="help">Esta aba depende do seu <code>library.js</code>. Aqui fica só a navegação (não quebra o layout).</p>
    </section>

    <section class="card" id="tab-reports" style="display:none;">
      <h2>Relatórios</h2>
      <p class="help">Esta aba depende do seu <code>reports.js</code>. Aqui fica só a navegação (não quebra o layout).</p>
    </section>

    <section class="card">
      <h2>Diagnóstico (Admin)</h2>
      <pre id="adminLog" class="log"></pre>
    </section>
  </main>

  <script type="module" src="./js/admin.js?v=1"></script>
</body>
</html>