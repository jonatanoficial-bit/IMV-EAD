<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b1b2b" />
  <title>IMV • Login</title>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="brand">
        <img src="./assets/logo-imv.png" alt="IMV" />
        <div class="t">
          <div class="h">IMV • Escola EAD</div>
          <div class="s">Acesso do Admin • Professores • Alunos</div>
        </div>
      </div>
      <div class="actions">
        <a class="chip" href="./index.html">Login</a>
      </div>
    </div>

    <div class="grid two" style="margin-top:14px;">
      <div class="card">
        <h2 style="margin:0 0 10px;font-size:18px;">Entrar</h2>
        <div class="muted">Digite seu email e senha. Você será direcionado automaticamente conforme seu perfil.</div>

        <form id="loginForm" style="margin-top:12px;">
          <div class="formRow">
            <label>Email</label>
            <input id="email" class="input" type="email" autocomplete="username" placeholder="email@exemplo.com" required />
          </div>

          <div class="formRow">
            <label>Senha</label>
            <input id="password" class="input" type="password" autocomplete="current-password" placeholder="••••••••" required />
          </div>

          <div class="actions" style="margin-top:12px;">
            <button id="btnLogin" type="submit">Entrar</button>
          </div>

          <div id="msgOk" class="msg ok"></div>
          <div id="msgErr" class="msg err"></div>
        </form>

        <hr class="sep" />

        <h3 style="margin:0 0 8px;font-size:16px;">Diagnóstico (log)</h3>
        <div class="muted">Se travar, copie o texto daqui e me mande.</div>
        <pre id="logBox" style="margin-top:10px; padding:10px 12px; border:1px solid rgba(255,255,255,.08); border-radius:14px; background: rgba(255,255,255,.03); color: rgba(233,242,255,.85); white-space:pre-wrap; word-break:break-word; min-height:110px;"></pre>
      </div>

      <div class="card">
        <h2 style="margin:0 0 10px;font-size:18px;">Checklist do login</h2>
        <div class="muted" style="white-space:pre-wrap;">
✅ 1) Email/senha existem no Firebase Auth
✅ 2) Existe /users/{uid} no Firestore
✅ 3) Esse doc tem:
   active: true
   role: "admin" | "teacher" | "student"
        </div>
        <div class="footer" style="margin-top:14px;">© IMV • Login</div>
      </div>
    </div>

    <div class="footer">© IMV • IMV-EAD</div>
  </div>

  <!-- ✅ TEM que ser module -->
  <script type="module" src="./js/index.js"></script>
</body>
</html>